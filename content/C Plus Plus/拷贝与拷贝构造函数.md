---
aliases: 
tags:
  - cpp
title: æ‹·è´ä¸æ‹·è´æ„é€ å‡½æ•°
created: 2024-09-01 20:14
updated: 2024-09-13 00:17
date: 2024-09-01 20:14
---
æ‹·è´æ˜¯æŒ‡å°†ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ•°æ®ä»ä¸€ä¸ªåœ°æ–¹å¤åˆ¶åˆ°å¦ä¸€ä¸ªåœ°æ–¹ï¼ŒåŒæ—¶å­˜åœ¨ä¸¤ä¸ªå‰¯æœ¬
æ‹·è´ä¸€æ–¹é¢å¯ä»¥è®©ä»£ç æŒ‰ç…§é¢„æœŸè¿è¡Œï¼Œå¦ä¸€æ–¹ä¸å¿…è¦çš„æ‹·è´ä¼šå½±å“ä»£ç çš„è¿è¡Œæ•ˆç‡ã€‚ç†è§£ C++ä¸­æ‹·è´çš„å·¥ä½œåŸç†å¯¹äºç¼–å†™é«˜æ•ˆçš„ C++ä»£ç æ˜¯å¾ˆæœ‰å¿…è¦çš„
> [!TIP] TIPğŸ’¡ 
>  åœ¨è¯»å–æˆ–ä¿®æ”¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡æ—¶ï¼Œåº”å°½å¯èƒ½çš„é¿å…æ‹·è´ï¼Œå› ä¸ºæ‹·è´éœ€è¦é¢å¤–çš„æ—¶é—´å¼€é”€

```cpp
struct Vector
{
	float x,y;
}

int main()
{
	int a = 2;
	int b = a;	//bä¸aæ˜¯ç‹¬ç«‹çš„ä¸¤ä¸ªå†…å­˜ç©ºé—´
	b = 3;      //açš„å€¼å¹¶ä¸ä¼šå—åˆ°å½±å“

	Vector a = {2,3};
	Vector b = a;		//bä¸aä»ç„¶æ˜¯ç‹¬ç«‹çš„ä¸¤ä¸ªå†…å­˜ç©ºé—´
	b.x = 5;			//açš„å€¼ä¸å—å½±å“

	Vector* a = new Vector();
	Vector* b = a;		//bå’Œaçš„"å€¼"ç›¸åŒï¼Œå³åœ°å€ç›¸åŒ
	//case1
	b++;				//açš„â€œå€¼â€ä¸å˜ï¼Œå³æŒ‡é’ˆæŒ‡å‘åœ°å€ä¸å˜
	//case2
	b->x = 2;			//å› ä¸ºaå’ŒbæŒ‡å‘åŒä¸€ä¸ªåœ°å€ï¼Œæ‰€ä»¥aå’ŒbåŒæ—¶å˜åŒ–
	
}
```
é™¤äº†å¼•ç”¨ä»¥å¤–ï¼Œæ¯æ¬¡ä½¿ç”¨ `=` éƒ½æ˜¯åœ¨è¿›è¡Œä¸€æ¬¡æ‹·è´ï¼ŒæŒ‡é’ˆä¼šå¤åˆ¶å†…å­˜åœ°å€å€¼ï¼Œå˜é‡ä¼šå¤åˆ¶å†…å­˜ä¸­çš„å€¼

ä¸‹é¢é€šè¿‡å®ç°ä¸€ä¸ªå­—ç¬¦ä¸²ç±»
```cpp
#include<iostream>  
  
classÂ StringÂ {  
private:  
Â Â Â Â char*Â m_Buffer;  
Â Â Â Â unsignedÂ intÂ m_Size;  
public:  
Â Â Â Â String(constÂ char*Â string)Â {  
Â Â Â Â Â Â Â Â m_SizeÂ =Â strlen(string);  
Â Â Â Â Â Â Â Â m_BufferÂ =Â newÂ char[m_Size+1];Â Â Â Â //ä¸ºç»ˆæ­¢ç¬¦ç•™ä¸€ä¸ªå­—èŠ‚  
Â Â Â Â Â Â Â Â memcpy(m_Buffer,Â string,Â m_Size);  
Â Â Â Â Â Â Â Â m_Buffer[m_Size]Â =Â 0;  
Â Â Â Â }  
Â Â Â Â ~String()  
Â Â Â Â {  
Â Â Â Â Â Â Â Â delete[]Â m_Buffer;  
Â Â Â Â }  
  
Â Â Â Â char&Â operator[]Â (unsignedÂ intÂ index)  
Â Â Â Â {  
Â Â Â Â Â Â Â Â returnÂ m_Buffer[index];  
Â Â Â Â }  
Â Â Â Â friendÂ std::ostream&Â operator<<Â (std::ostream&Â stream,Â constÂ String&Â string);  
};  
  
std::ostream&Â operator<<Â (std::ostream&Â stream,Â constÂ String&Â string)Â {  
Â Â Â Â streamÂ <<Â string.m_Buffer;  
Â Â Â Â returnÂ stream;  
}  
  
intÂ main()Â {  
Â Â Â Â StringÂ stringÂ =Â "ZhangSan";  
Â Â Â Â StringÂ secondÂ =Â string;  
Â Â Â Â second[2]Â =Â 'e';Â Â Â Â //ä¸¤ä¸ªå­—ç¬¦ä¸²åŒæ—¶å‘ç”Ÿäº†å˜åŒ–  
Â Â Â Â std::coutÂ <<Â stringÂ <<Â std::endl;  
}
```
åœ¨ç¨‹åºç»“æŸæ—¶å‘ç”Ÿäº†å´©æºƒï¼Œä¸»è¦æ˜¯å­—ç¬¦ä¸² `second` åœ¨æ‹·è´æ—¶ï¼Œæ˜¯å°†å†…éƒ¨å±æ€§è¿›è¡Œäº†æ‹·è´ï¼Œå› æ­¤ä¸¤è€…çš„ `m_Buffer` æŒ‡å‘çš„æ˜¯åŒä¸€ç‰‡å†…å­˜ç©ºé—´ã€‚åœ¨ç¨‹åºç»“æŸæ—¶ï¼Œè°ƒç”¨ä¸¤è€…çš„ææ„å‡½æ•°å¯¹åŒä¸€ä¸ªå†…å­˜ç©ºé—´è°ƒç”¨äº†ä¸¤æ¬¡ deleteï¼Œäºæ˜¯ç¨‹åºå´©æºƒäº†

æ­¤å¤–ï¼Œä¿®æ”¹ `second` å­—ç¬¦ä¸²å¯¼è‡´ `string` å­—ç¬¦ä¸²çš„å˜åŒ–ä¹ŸåŒæ ·è¯´æ˜äº†ä¸¤è€…æŒ‡å‘äº†åŒä¸€ä¸ªå†…å­˜ç©ºé—´

å› æ­¤è¿™ç§ç±»å‹çš„æ‹·è´ç§°ä¹‹ä¸º**æµ…æ‹·è´**

æœ‰æ—¶æˆ‘ä»¬æƒ³ä½¿ç”¨ç‹¬ç«‹äºåŸå¯¹è±¡çš„æ‹·è´å‰¯æœ¬ï¼Œé‚£ä¹ˆéœ€è¦è¿›è¡Œ**æ·±æ‹·è´**ã€‚æ·±æ‹·è´çš„æ–¹æ³•æœ‰è®¸å¤šï¼Œä¾‹å¦‚ clone å‡½æ•°æˆ–è€…è‡ªå®šä¹‰æ–¹æ³•è¿”å›ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚æœ¬æ–‡ä»‹ç»ä¸€ç§ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°çš„æ–¹æ³•ï¼Œå½“åˆ›å»ºä¸€ä¸ªå’Œæºå¯¹è±¡åŒç±»å‹çš„å¯¹è±¡æ—¶ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œåœ¨ [[æ™ºèƒ½æŒ‡é’ˆ#æ™ºèƒ½æŒ‡é’ˆ unique_ptr|unique]] ä¸­é€šè¿‡ç¦ç”¨è¯¥æ–¹æ³•é˜»æ­¢å¯¹è±¡æ‹·è´
```cpp
//c++é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼ˆæµ…æ‹·è´ï¼‰
String(constÂ String&Â other)  
Â Â Â Â :m_Buffer(other.m_Buffer),m_Size(other.m_Size)  
{

}
//ç¦ç”¨å¯¹è±¡æ‹·è´ï¼Œä¾‹å¦‚unique_ptr
String(constÂ String&Â other) = delete;
//è‡ªå®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼ˆæ·±æ‹·è´ï¼‰
String(constÂ String&Â other)  
Â Â Â Â :m_Size(other.m_Size)  
{  
Â Â Â Â m_BufferÂ =Â newÂ char[m_Size+1];  
Â Â Â Â memcpy(m_Buffer,Â other.m_Buffer,Â m_Size+1);  
}
```


```cpp
#include<iostream>  
  
classÂ StringÂ {  
private:  
Â Â Â Â char*Â m_Buffer;  
Â Â Â Â unsignedÂ intÂ m_Size;  
public:  
Â Â Â Â String(constÂ char*Â string)Â {  
Â Â Â Â Â Â Â Â m_SizeÂ =Â strlen(string);  
Â Â Â Â Â Â Â Â m_BufferÂ =Â newÂ char[m_Size+1]; 
Â Â Â Â Â Â Â Â memcpy(m_Buffer,Â string,Â m_Size);  
Â Â Â Â Â Â Â Â m_Buffer[m_Size]Â =Â 0;  
Â Â Â Â }
Â Â Â Â String(const String& other)
Â Â Â Â     :m_Size(other.m_Size)
Â Â Â Â {Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â     m_Buffer=newchar[m_Size+1];
Â Â Â Â     memcpy(m_Buffer,other.m_Buffer,m_Size+1);
Â Â Â Â }
Â Â Â Â ~String()  
Â Â Â Â {  
Â Â Â Â Â Â Â Â delete[]Â m_Buffer;  
Â Â Â Â }  
  
Â Â Â Â char&Â operator[]Â (unsignedÂ intÂ index)  
Â Â Â Â {  
Â Â Â Â Â Â Â Â returnÂ m_Buffer[index];  
Â Â Â Â }  
Â Â Â Â friendÂ std::ostream&Â operator<<Â (std::ostream&Â stream,Â constÂ String&Â string);  
};  
  
std::ostream&Â operator<<Â (std::ostream&Â stream,Â constÂ String&Â string)Â {  
Â Â Â Â streamÂ <<Â string.m_Buffer;  
Â Â Â Â returnÂ stream;  
}

voidÂ printString(StringÂ string)  
{  
Â Â Â Â std::coutÂ <<Â stringÂ <<Â std::endl;  
}
  
intÂ main()Â {  
Â Â Â Â StringÂ stringÂ =Â "ZhangSan";  
	printString(string); 
}
```
åœ¨ä½¿ç”¨ `printString` å‡½æ•°æ—¶ä¼šå­˜åœ¨ä¸€æ¬¡æ‹·è´æ„é€ å‡½æ•°çš„è°ƒç”¨, æ¯æ¬¡æ‹·è´å¯¹è±¡éƒ½éœ€è¦åˆ†é…å†…å­˜ï¼Œå¤åˆ¶å†…å­˜ä»¥åŠé‡Šæ”¾å†…å­˜ï¼Œä¸ºäº†é¿å…æ²¡å¿…è¦çš„å¯¹è±¡æ‹·è´ï¼Œåªæ˜¯å•çº¯çš„ä½¿ç”¨åŸå¯¹è±¡ï¼Œå»ºè®®ä½¿ç”¨å¼•ç”¨ä¼ é€’å¯¹è±¡
> [!TIP] TIPğŸ’¡ 
>  åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼ˆé™¤éå¤åˆ¶ä¼šæ›´å¿«ï¼‰å‚æ•°å¯¹è±¡å»ºè®®ä½¿ç”¨å¼•ç”¨ä¼ é€’ï¼Œæ ¹æ®æ˜¯å¦éœ€è¦ç¼–è¾‘å¯¹è±¡å†³å®š `const` å…³é”®å­—çš„ä½¿ç”¨ã€‚åœ¨å‡½æ•°å†…éƒ¨å¯ä»¥è¿›ä¸€æ­¥å†³å®šä¼ å…¥å¯¹è±¡æ˜¯å¦éœ€è¦æ‹·è´
```cpp
voidÂ printString(const String&Â string)  
{
	//å¯è‡ªè¡Œå†³å®šæ˜¯å¦æ‹·è´
	String copy = string;
Â Â Â Â std::coutÂ <<Â stringÂ <<Â std::endl;  
}
```
