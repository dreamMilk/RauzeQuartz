---
aliases: 
tags:
  - cpp
title: ç®­å¤´æ“ä½œç¬¦
date: 2024-09-04 19:34
updated: 2024-09-13 00:11
---

# åŸºç¡€ä½¿ç”¨åœºæ™¯
`->` å±äºæ“ä½œç¬¦ä¸­çš„ä¸€ç§ï¼Œä¸»è¦é’ˆå¯¹ç»“æ„ä½“å’Œç±»ä½¿ç”¨
```cpp
#include<iostream>  
#include<string>  
  
classÂ Entity  
{  
public:  
Â Â Â Â voidÂ Print()Â constÂ {Â std::coutÂ <<Â "Hello!"Â <<Â std::endl;Â }  
};  
  
intÂ main()  
{  
Â Â Â Â EntityÂ e;  
Â Â Â Â e.Print();
Â Â Â Â 
Â Â Â Â Entity*Â ptrÂ =Â &e;
Â Â Â Â //case 1
Â Â Â Â Entity&Â entityÂ =Â *ptr;  
Â Â Â Â entity.Print();
Â Â Â Â //case 2
Â Â Â Â (*ptr).Print();  
Â Â Â Â *ptr.Print();Â Â Â Â //*è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ä½ï¼Œé”™è¯¯å†™æ³•  
Â Â Â Â 
Â Â Â Â ptr->Print();Â Â Â Â //->ç¬¦å·ç®€åŒ–äº†ä¸Šè¿°é€†å‘å¼•ç”¨çš„è¿‡ç¨‹  
Â Â Â Â }
```
æŒ‡é’ˆå­˜å‚¨çš„å…¶å®åªæ˜¯ä¸€ä¸ªå¯¹è±¡åœ°å€ï¼Œä¸ºäº†è°ƒç”¨å¯¹è±¡å‡½æ•°ï¼Œä¸å¯ç›´æ¥é€šè¿‡ `.å‡½æ•°å` è°ƒç”¨ï¼Œéœ€è¦ä»åœ°å€ä¸­è·å–åˆ°å®é™…å¯¹è±¡åå†è°ƒç”¨ï¼Œ`->` åªæ˜¯å°†è¿™ä¸¤æ­¥å¤æ‚çš„æ“ä½œç®€åŒ–äº†
# é‡è½½->çš„ä½¿ç”¨

```cpp
#include<iostream>
#include<string>

class Entity
{
public:
	void Print() const { std::cout << "Hello!" << std::endl; }
};

class ScoopPtr
{
private:
	Entity* m_entity;
public:
	ScoopPtr(Entity* entity):m_entity(entity)
	{
		
	}
	
	~ScoopPtr()
	{
		delete m_entity;
	}
	
	Entity* operator->()
	{
		return m_entity;
	}
};

int main()
{
	ScoopPtr entity = new Entity();
	entity->Print();
}
```

# ä½¿ç”¨æ¡ˆä¾‹
åœ¨å®é™…ä»£ç å¼€å‘ä¸­ï¼Œæ•°æ®é€šä¿¡ä¼ è¾“å¤§éƒ¨åˆ†æ˜¯å°†æ•°æ®åºåˆ—åŒ–ä¸ºå­—èŠ‚æµçš„æ–¹å¼ï¼Œæœ‰æ—¶ä¼šéœ€è¦çŸ¥é“æ•°æ®ä¸­çš„æŸä¸ªéƒ¨åˆ†çš„åç§»é‡æ—¶ï¼Œå¯ä»¥é€šè¿‡ `->` æ»¡è¶³ä¸Šè¿°éœ€æ±‚

```cpp
#include<iostream>  
#include<string>  
  
structÂ VectorÂ {  
Â Â Â Â floatÂ x,y,z;  
};  
  
intÂ main()  
{  
Â Â Â Â intÂ offsetÂ =Â (int)&((Vector*)nullptr)->x;  
Â Â Â Â std::coutÂ <<Â offsetÂ <<Â std::endl;  
}
```

`(int)&((Vector*)nullptr)->x` è¿™ä¸€è¡Œä»£ç æŒ‰æ­¥éª¤æ¥ï¼Œå…ˆå°†ç©ºæŒ‡é’ˆè½¬æ¢ä¸º Vector æŒ‡é’ˆï¼Œç„¶åè®¿é—®å±æ€§ x ï¼Œå†é€šè¿‡&å–å¾—è¯¥å±æ€§çš„å†…å­˜åœ°å€ï¼ˆå³åœ¨ç»“æ„ä½“ä¸­çš„åç§»é‡ï¼‰ï¼Œæœ€åè¿›è¡Œè½¬æ¢æ˜¾ç¤º
> [!BUG] BUGğŸ
> å› ä¸ºå–å¾—çš„åç§»é‡ä¸º floatï¼Œè½¬æ¢ä¸º int æ—¶å­˜åœ¨ç²¾åº¦ä¸¢å¤±ï¼Œå¯èƒ½ä¼šæŠ¥é”™
> 
